"use strict";var _createClass=function(){function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}window.onload=function(){var e=document.getElementById("modal-btn"),r=document.getElementById("modal"),t=document.querySelector(".modal .js-modal-close"),l=document.getElementById("elem-title"),c=document.getElementById("elem-description"),o=document.getElementById("elem-priority");e.addEventListener("click",function(){l.value="",c.value="",r.removeAttribute("data-item"),r.classList.add("active")}),t.addEventListener("click",function(){r.classList.remove("active")}),document.addEventListener("click",function(e){e.target===r&&(r.classList.remove("active"),r.removeAttribute("data-item"))}),document.getElementById("search").onkeyup=function(){for(var e=this.value,t=document.getElementsByClassName("item"),i=0;i<t.length;i++){-1!==t[i].querySelector(".item__title").innerHTML.toLowerCase().indexOf(e.toLowerCase())&&0<e.length?t[i].style.display="":0===e.length?t[i].style.display="":t[i].style.display="none"}};var i=(_createClass(s,[{key:"saveItem",value:function(e){this.itemArray.push(e),console.log(this.itemArray)}},{key:"initItem",value:function(){return this.itemArray}},{key:"updateArray",value:function(e,t,i,s){this.item=e,this.title=t,this.description=i,this.priority=s;var n=this.item;this.itemArray[n].title=this.title,this.itemArray[n].description=this.description,this.itemArray[n].priority=this.priority}},{key:"cleanArray",value:function(e,t){this.index=e,this.array=t,delete this.array[this.index]}}]),s);function s(){_classCallCheck(this,s),this.itemArray=[]}var d=(_createClass(n,[{key:"template",value:function(e,t,i){this.content=t,this.id=i;var s=this.content,n=s[s.length-1];e.innerHTML+='<div id="'+this.id+'" class="item" data-status="open">\n                        <div class="item__wrapper">\n                            <div class="item__title">'+n.title+'</div>\n                            <div class="item__description">'+n.description+'</div>\n                            <div class="item__container">\n                                <div class="item__priority">'+n.priority+'</div>\n                                <div class="item__button-wrapper">\n                                    <button type="button" class="item__options">...</button>\n                                    <ul class="item__dropdown">\n                                        <li class="item__status" data-status="done">done</li>\n                                        <li class="item__status" data-status="edit">edit</li>\n                                        <li class="item__status" data-status="delete">delete</li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>'}},{key:"setItemParams",value:function(e){this.selector=e,l.value=this.selector.querySelector(".item__title").innerHTML,c.value=this.selector.querySelector(".item__description").innerHTML}},{key:"updateItem",value:function(e,t){this.elem=e,this.array=t;var i=this.array[this.elem],s=document.getElementById(this.elem);s.querySelector(".item__title").innerHTML=i.title,s.querySelector(".item__description").innerHTML=i.description,s.querySelector(".item__priority").innerHTML=i.priority}}]),n);function n(e,t,i){_classCallCheck(this,n),this.title=e,this.description=t,this.priority=i}var a=document.getElementById("create-item"),u=document.getElementById("item-wrapper"),m=new i,v=0;a.addEventListener("click",function(){var e=l.value,t=c.value,i=o.innerHTML,s=new d(""+e,""+t,""+i);if("edit"===r.getAttribute("data-item")){var n=document.querySelector(".item.current"),a=n.getAttribute("id");m.updateArray(a,e,t,i),(new d).updateItem(a,m.itemArray),n.classList.remove("current"),r.classList.remove("active")}else m.saveItem(s),(new d).template(u,m.initItem(),v),r.classList.remove("active"),r.removeAttribute("data-item");v++});var h=(_createClass(y,[{key:"getValue",value:function(){return this.value}}]),y);function y(e){_classCallCheck(this,y),this.value=e}document.addEventListener("mouseup",function(e){var t=e.target;"item__options"===t.className&&t.nextElementSibling.classList.toggle("active"),e.target&&"item__status"===e.target.className&&e.target.addEventListener("click",function(){var e=this.getAttribute("data-status"),t=this.closest(".item");this.parentNode.classList.remove("active"),"delete"===e?((new i).cleanArray(t.getAttribute("id"),m.itemArray),this.closest(".item").remove()):"done"===e?(this.closest(".item__wrapper").classList.add("active"),t.setAttribute("data-status","done")):"edit"===e&&(this.closest(".item").classList.add("current"),(new d).setItemParams(t),r.setAttribute("data-item","edit"),r.classList.add("active"))})});for(var p=document.getElementsByClassName("filter"),_=document.getElementsByClassName("filter__dropdown"),g=0;g<p.length;g++)p[g].addEventListener("click",function(){var e=this.querySelector(".filter__dropdown");this.classList.toggle("active"),e.classList.toggle("active")});for(var f=0;f<_.length;f++)for(var L=_[f].children,E=0;E<L.length;E++)L[E].addEventListener("click",function(){var e=this.innerHTML;this.parentElement.previousElementSibling.innerHTML=e,this.parentElement.previousElementSibling.setAttribute("data-options",e),new h(e).getValue()})};