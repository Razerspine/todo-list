"use strict";var _createClass=function(){function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}window.onload=function(){var t=document.getElementById("modal-btn"),r=document.getElementById("modal"),e=document.querySelector(".modal .js-modal-close"),l=document.getElementById("elem-title"),o=document.getElementById("elem-description"),c=document.getElementById("elem-priority");t.addEventListener("click",function(){l.value="",o.value="",r.removeAttribute("data-item"),r.classList.add("active")}),e.addEventListener("click",function(){r.classList.remove("active")}),document.addEventListener("click",function(t){t.target===r&&(r.classList.remove("active"),r.removeAttribute("data-item"))}),document.getElementById("search").onkeyup=function(){for(var t=this.value,e=document.getElementsByClassName("item"),i=0;i<e.length;i++){-1!==e[i].querySelector(".item__title").innerHTML.toLowerCase().indexOf(t.toLowerCase())&&0<t.length?e[i].style.display="":0===t.length?e[i].style.display="":e[i].style.display="none"}};var i=(_createClass(s,[{key:"saveItem",value:function(t){this.itemArray.push(t)}},{key:"initItem",value:function(){return this.itemArray}},{key:"updateArray",value:function(t,e,i,s){this.item=t,this.title=e,this.description=i,this.priority=s;var n=this.item;this.itemArray[n].title=this.title,this.itemArray[n].description=this.description,this.itemArray[n].priority=this.priority}},{key:"cleanArray",value:function(t,e){this.index=t,this.array=e,delete this.array[this.index]}}]),s);function s(){_classCallCheck(this,s),this.itemArray=[]}var d=(_createClass(n,[{key:"template",value:function(t,e,i){this.content=e,this.id=i;var s=this.content,n=s[s.length-1];t.innerHTML+='<div id="'+this.id+'" class="item" data-status="open">\n                        <div class="item__wrapper">\n                            <div class="item__title">'+n.title+'</div>\n                            <div class="item__description">'+n.description+'</div>\n                            <div class="item__container">\n                                <div class="item__priority">'+n.priority+'</div>\n                                <div class="item__button-wrapper">\n                                    <button type="button" class="item__options">...</button>\n                                    <ul class="item__dropdown">\n                                        <li class="item__status" data-status="done">done</li>\n                                        <li class="item__status" data-status="edit">edit</li>\n                                        <li class="item__status" data-status="delete">delete</li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>'}},{key:"setItemParams",value:function(t){this.selector=t,l.value=this.selector.querySelector(".item__title").innerHTML,o.value=this.selector.querySelector(".item__description").innerHTML}},{key:"updateItem",value:function(t,e){this.elem=t,this.array=e;var i=this.array[this.elem],s=document.getElementById(this.elem);s.querySelector(".item__title").innerHTML=i.title,s.querySelector(".item__description").innerHTML=i.description,s.querySelector(".item__priority").innerHTML=i.priority}}]),n);function n(t,e,i){_classCallCheck(this,n),this.title=t,this.description=e,this.priority=i}var a=document.getElementById("create-item"),m=document.getElementById("item-wrapper"),u=new i,v=0;a.addEventListener("click",function(){var t=l.value,e=o.value,i=c.innerHTML,s=new d(""+t,""+e,""+i);if("edit"===r.getAttribute("data-item")){var n=document.querySelector(".item.current"),a=n.getAttribute("id");u.updateArray(a,t,e,i),(new d).updateItem(a,u.itemArray),n.classList.remove("current"),r.classList.remove("active")}else u.saveItem(s),(new d).template(m,u.initItem(),v),r.classList.remove("active"),r.removeAttribute("data-item");v++}),document.addEventListener("mouseup",function(t){var e=t.target;"item__options"===e.className&&e.nextElementSibling.classList.toggle("active"),t.target&&"item__status"===t.target.className&&t.target.addEventListener("click",function(){var t=this.getAttribute("data-status"),e=this.closest(".item");this.parentNode.classList.remove("active"),"delete"===t?((new i).cleanArray(e.getAttribute("id"),u.itemArray),this.closest(".item").remove()):"done"===t?(this.closest(".item__wrapper").classList.add("active"),e.setAttribute("data-status","done")):"edit"===t&&(this.closest(".item").classList.add("current"),(new d).setItemParams(e),r.setAttribute("data-item","edit"),r.classList.add("active"))})});var h=(_createClass(y,[{key:"getValue",value:function(t){this.option=t;for(var e=document.getElementsByClassName("item"),i=0;i<e.length;i++){var s=e[i].getAttribute("data-status"),n=e[i].querySelector(".item__priority").textContent.toLowerCase();"done"===this.option&&s===this.option&&"all"!==this.option?e[i].style.display="":"all"===this.option?e[i].style.display="":"open"===this.option&&s===this.option?e[i].style.display="":"high"===this.option&&n===this.option?e[i].style.display="":"normal"===this.option&&n===this.option?e[i].style.display="":"low"===this.option&&n===this.option?e[i].style.display="":e[i].style.display="none"}}}]),y);function y(){_classCallCheck(this,y)}for(var p=document.getElementsByClassName("filter"),_=document.getElementsByClassName("filter__dropdown"),g=document.querySelector(".modal-select"),f=document.querySelector(".modal-select__dropdown"),L=0;L<p.length;L++)p[L].addEventListener("click",function(){var t=this.querySelector(".filter__dropdown");this.classList.toggle("active"),t.classList.toggle("active")});for(var E=0;E<_.length;E++)for(var b=_[E].children,w=0;w<b.length;w++)b[w].addEventListener("click",function(){var t=this.innerHTML;this.parentElement.previousElementSibling.innerHTML=t,this.parentElement.previousElementSibling.setAttribute("data-options",t),(new h).getValue(t,u.itemArray)});g.addEventListener("click",function(){var t=this.querySelector(".modal-select__dropdown");this.classList.toggle("active"),t.classList.toggle("active")});for(var A=f.children,k=0;k<A.length;k++)A[k].addEventListener("click",function(){var t=this.innerHTML;this.parentElement.previousElementSibling.innerHTML=t,this.parentElement.previousElementSibling.setAttribute("data-options",t)})};